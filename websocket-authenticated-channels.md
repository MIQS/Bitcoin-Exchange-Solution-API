# Websocket Authenticated Channels
* [Authenticate](#authenticate)
* [Order Update](#orderUpdate)
* [Account Update](#accountUpdate)

In order to receive the data on authenticated channels, the websocket session needs to be authenticated first
by calling authenticate.

All requests need to provide the request time in seconds and must be within 5 seconds of the server time 
or your request will be considered expired and rejected.  To change 5 second expiry, user can set **expiry**
to the desired seconds.

<a name="authenticate" id="authenticate"> </a>

---
## Authenticate

### Request Fields

Name                   | Type(value)          | Mandatory   | Description
-----------------------| ---------------------|-------------|-----------------------
type                   | authenticate         | M           | 
timestamp              | Long                 | M           | current time in milliseconds from UNIX EPOCH
apiKey                 | String               | M           | 
signature              | String               | M           | Generated by creating a sha256 HMAC using the base64-decoded secret key on the prehash string timestamp + "authenticate" (where + represents string concatenation) and base64-encode the output.
passcode               | String               | M           | 
userMessageId          | Integer              | O           | Unique message id for this websocket session
expiry                 | Integer              | O           | Seconds for the authenticated channel requests to expire

### Response Fields

Name            | Type(value)                    | Mandatory   | Description
----------------| -------------------------------| ------------|--------------------
type            | authenticated                  | M           | Subscribe/Unsubscribe message type
timestamp       | Long                           | M           | When authentication is accepted
userMessageId   | Integer                        | (M)         | Mandatory if userMessageId is provided in the user request

<a name="orderUpdate" id="orderUpdate"> </a>

---
## Order Update

### Request Fields

Name                       | Type(value)                    | Mandatory   | Description
---------------------------| -------------------------------| ------------|--------------------
type                       | subscribe                      | M           | Subscribe/Unsubscribe message type
channel                    | orderUpdate                    | M           | 
instrumentIds              | Array of instrumentId Strings  | O           | Subscribe/Unsubscribe all instruments by default
numberOfSnapshotRecords    | Integer                        | O           | Max recent number of open orders returned. All open orders will be returned if not specified.
userMessageId              | Integer                        | O           | Unique message id for this websocket session


### Response Fields

Name            | Type(value)                    | Mandatory   | Description
----------------| -------------------------------| ------------|--------------------
type            | subscribed                     | M           | Subscribe/Unsubscribe message type
channel         | orderUpdate                    | M           | 
timestamp       | Long                           | M           | When the subscription request was accepted
instrumentIds   | Array of instrumentId Strings  | O           | Subscribed/Unsubscribed for all instruments by default
openOrders      | Array of orders Json Fields    | M           | 
userMessageId   | Integer                        | (M)         | Mandatory if userMessageId is provided in the user request


### Channel Fields

Name                 | Type(value)                               | Mandatory   | Description
---------------------| ------------------------------------------| ------------|--------------------
type                 | orderUpdate                               | M           | 
timestamp            | Long                                      | M           | Order update time
orderId              | String                                    | M           | 
instrumentId         | String                                    | M           | 
orderType            | Enum                                      | M           |
price                | DoubleString                              | M           | 
size                 | DoubleString                              | M           | 
side                 | Enum                                      | M           |
createdTime          | Long                                      | M           | 
stopPrice            | DoubleString                              | O           | 
orderStatus          | Enum                                      | M           |
tradeId              | String                                    | O           | Available when the current update is a trade
executedSize         | DoubleString                              | O           | Available when the current update is a trade
executedPrice        | DoubleString                              | O           | Available when the current update is a trade
avgExecutedPrice     | DoubleString                              | O           | Average executed price of all fills in this order 
totalExecutedSize    | DoubleString                              | O           | Total executed size of all fills in this order
postLiquidity        | Boolean                                   | O           | True â€“ order rest in the book initially 
selfTradePrevention  | Enum                                      | M           |
clientOrderId        | String                                    | O           | 
cancelReason         | Enum                                      | O           | Provided when order is cancelled
fee                  | DoubleString                              | O           | Available when the current update is a trade

<a name="accountUpdate" id="accountUpdate"> </a>

---
## Account Update

### Request Fields

Name                         | Type(value)                    | Mandatory   | Description
-----------------------------| -------------------------------| ------------|--------------------
type                         | subscribe                      | M           | Subscribe/Unsubscribe message type
channel                      | accountUpdate                  | M           | 
assets                       | Array of asset Strings         | O           | Subscribe for all currencies by default
userMessageId                | Integer                        | O           | Unique message id for this websocket session


### Response Fields

Name                   | Type(value)                                                                   | Mandatory   | Description
-----------------------| ------------------------------------------------------------------------------| ------------|--------------------
type                   | subscribed                                                                    | M           | Subscribe/Unsubscribe message type
channel                | accountUpdate                                                                 | M           | 
timestamp              | Long                                                                          | M           | When the subscription request is accepted
assets                 | Array of asset Strings                                                        | O           |
balances               | Array of account balances (asset, balance, availableBalance)                  | M           |
userMessageId          | Integer                                                                       | (M)         | Mandatory if userMessageId is provided in the user request

### Channel Fields

Name              | Type(value)                                                               | Mandatory   | Description
------------------| --------------------------------------------------------------------------| ------------|------------------------------------------------------------------------------
type              | accountUpdate                                                             | M           | 
timestamp         | Long                                                                      | M           | Account update time
updateReason      | Enum                                                                      | M           |
balances          | Array of account balances (asset, balance, availableBalance)              | M           |
referenceId       | String                                                                    | M           | NEW_ORDER-orderId; TRADE-tradeId; PENDING_WITHDRAW-withdrawId; TRANSFER-txId


