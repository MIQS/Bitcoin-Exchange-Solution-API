# REST Authenticated Endpoints

* [Authentication](#authentication)
* [Open Orders](#openOrders)
* [All Orders](#allOrders)
* [Fills](#fills)
* [New Order](#newOrder)
* [Cancel Order](#cancelOrder)
* [Cancel All Order](#cancelAllOrders)
* [Accounts](#accounts)
* [Account Transactions](#accountTransactions)
* [Withdraw](#withdraw)

<a name="authentication" id="authentication"> </a>

---
## Authentication
All requests to authenticated endpoints require authentication by providing API key, signature, timestamp and passcode.

### API Key
Before being able to send any requests, you must create API key via the exchange website. Upon creation, you will be provided
* Key  (Generated by exchange)
* Secret  (Generated by exchange)
* Passcode  (Provided by user and exchange stores the salted hash of the passcode to further secure the api access)

### API Key Permissions
You can restrict the functionality of API keys.
+ TRADE_VIEW
    * [OpenOrders](#openOrders)
    * [AllOrders](#allOrders)
    * [Fills](#fills)
+ TRADE
    * [New Order](#new-order)
    * [Cancel Order](#cancel-order)
    * [Cancel All Order](#cancel-all-order)
+ ACCOUNT_VIEW
    * [Accounts](#accounts)
    * [Account Transactions](#account-transactions)
+ WITHDRAW
    * [Withdraw](#withdraw)

### Sending a Request

All requests must contain the following headers:
* API-KEY The api key
* API-SIGN The base64-encoded signature by creating a sha256 HMAC using the base64 decoded secret Key on the prehash string timestamp + method + url and base64-encode the output
* API-TIMESTAMP The same timestamp used in the signature. It should be in seconds since UNIX Epoch.
* API-PASSCODE The passcode provided during api key creation

The timestamp must be within 5 seconds of the serve time or your request will be considered expired and rejected. 
To change 5 seconds expiry time, you could set the optional field **API-EXPIRY** in header with a number in seconds.
Please use /time endpoint to query for the server time if you believe there many be time skew between your server and our servers.

<a name="openOrders" id="openOrders"> </a>

---
## OpenOrders

    GET /openOrders

Returns an array of open orders; Pagination is supported. 
Data is returned in descending order of **lastModifiedTime**. Newest modified orders first, oldest last.

### Request Parameters

Name           | Type(value)                                 | Mandatory   | Description
---------------| --------------------------------------------|-------------|-------------------------------------------------------
instrumentId   | String                                      | O           | If not provided, orders for all symbols are returned
pageNumber     | Integer                                     | O           | If not provided, it will use default page number
pageSize       | Integer                                     | O           | If not provided, it will use default page size

### Success Response Body Fields

Name         | Type(value)      | Mandatory | Description
-------------| -----------------|-----------|-------------
totalCount   | Integer          | M         |
records      | Array of orders  | M         |
count        | Integer          | M         |

### Record Fields

Name                  | Type(value)                      | Mandatory   | Description
----------------------| ---------------------------------|-------------|-------------------------------------------------------------------------------
orderId               | String                           | M           |
lastModifiedTime      | Long                             | M           | last update time on this order
instrumentId          | String                           | M           |
orderType             | Enum                             | M           | 
price                 | DoubleString                     | M           |
size                  | DoubleString                     | M           |
side                  | Enum                             | M           | 
timeInForce           | Enum                             | M           | 
createdTime           | Long                             | M           | When the order was accepted
stopPrice             | DoubleString                     | O           |
orderStatus           | Enum                             | M           | 
avgExecutedPrice      | DoubleString                     | O           | Average executed prices of all fills in this order 
totalExecutedSize     | DoubleString                     | O           |
selfTradePrevention   | Enum                             | M           | 
clientOrderId         | String                           | O           |

<a name="allOrders" id="allOrders"> </a>

---
## AllOrders

    GET /allOrders
    
    Weight: 5

Returns an array of orders; Pagination is supported. Data is returned in descending order of **lastModifiedTime**. Newest first, oldest last.
Cancelled orders in the most recent 2 days are included, the older cancelled orders are not.

### Request Parameters

Name           | Type(value)                                 | Mandatory   | Description
---------------| --------------------------------------------|-------------|-------------------------------------------------------
orderId        | String                                      | O           | 
instrumentId   | String                                      | O           | If not provided, orders for all assets are returned
orderStatus    | Enum                                        | O           | If not provided, orders for all status are returned
pageNumber     | Integer                                     | O           | If not provided, it will use default page number of 1
pageSize       | Integer                                     | O           | If not provided, it will use default page size of 100

### Success Response Body Fields

Name         | Type(value)      | Mandatory | Description
-------------| -----------------|-----------|-------------
totalCount   | Integer          | M         |
records      | Array of orders  | M         |
count        | Integer          | M         |

### Record Fields                      
Name                  | Type(value)                      | Mandatory   | Description
----------------------| ---------------------------------|-------------|-------------------------------------------------------------------------------
orderId               | String                           | M           | 
lastModifiedTime      | Long                             | M           | Timestamp of the last update on this order
instrumentId          | String                           | M           | 
orderType             | Enum                             | M           |
price                 | DoubleString                     | M           | 
size                  | DoubleString                     | M           | 
side                  | Enum                             | M           |
timeInForce           | Enum                             | M           |
createdTime           | Long                             | M           | When the order was accepted
stopPrice             | DoubleString                     | O           | 
orderStatus           | Enum                             | M           |
avgExecutedPrice      | DoubleString                     | O           | Average executed price of all fills in this order
totalExecutedSize     | DoubleString                     | O           | Total executed size
selfTradePrevention   | Enum                             | M           | Default - CO
clientOrderId         | String                           | O           | 

<a name="fills" id="fills"> </a>

---
## Fills

    GET /fills
    
    Weight: 5

Returns an array of fills; Pagination is supported. Data is returned in descending order. Newest first, oldest last.

### Request Parameters

Name          | Type(value)  | Mandatory | Description          
--------------| -------------| ----------| ----------------------------------------------------
instrumentId  | String       | O         | If not provided, fills for all instruments are returned
pageNumber    | Integer      | O         | If not provided, it will use default page number of 1
pageSize      | Integer      | O         | If not provided, it will use default page size of 100

### Success Response Body Fields

Name         | Type(value)      | Mandatory | Description
-------------| -----------------|-----------|-------------
totalCount   | Integer          | M         |
records      | Array of record  | M         |
count        | Integer          | M         |

### Record Fields  
Name          | Type(value)  | Mandatory | Description
--------------| -------------| ----------| ---------------------------------------
createdTime   | Long         | M         | When the fill occured
tradeId       | String       | M         |
orderId       | String       | M         | 
instrumentId  | String       | M         | 
side          | Enum         | M         |
price         | DoubleString | M         |
size          | DoubleString | M         |


<a name="newOrder" id="newOrder"> </a>

---
## New Order

    POST /newOrder

### Request Parameters:

Name                  | Type(value)        | Mandatory | Description
----------------------| -------------------| ----------| ----------------------------------------------------
instrumentId          | String             | M         |
orderType             | Enum               | M         |
price                 | DoubleString       | (M)       | Mandatory in LIMIT order
size                  | DoubleString       | (M)       | Mandatory in LIMIT or MARKET sell order
quoteAmount           | DoubleString       | (M)       | Amount in quote asset term.  Mandatory in MARKET buy order 
side                  | Enum               | M         |
timeInForce           | Enum               | O         | Default to GTC for LIMIT orders
clientOrderId         | String             | O         | Provided by user
stopType              | Enum               | O         | Only used in stop orders
stopPrice             | NumberString       | (M)       | Mandatory if stopType is specified
postOnly              | Boolean            | O         | Default to false. If any part of the order results in taking liquidity, the order will be rejected and no part of it will execute.
selfTradePrevention   | Enum               | O         | Default to CO - cancel the oldest

Mandatory fields based on order type:

orderType             | Mandatory Fields
----------------------|--------------------------------------------
LIMIT                 | price, size
MARKET                | size(sell order),  quoteAmount(buy order)
STOP_ENTRY            | quoteAmount(buy order), stopPrice
STOP_ENTRY_LIMIT      | price, size, stopPrice
STOP_LOSS             | size(sell order), stopPrice
STOP_LOSS_LIMIT       | price, size, stopPrice

### Success Response Body Fields

Name                  | Type(value)        | Mandatory | Description
----------------------| -------------------| ----------| ----------------------------------------------------
clientOrderId         | String             | (M)       | Mandatory if clientOrderId is provided by the user
orderId               | String             | M         | System generated unique order id
timestamp             | Long               | M         | Time when the order is accepted with order status of PENDING_NEW


<a name="cancelOrder" id="cancelOrder"> </a>

---
## Cancel Order 

    POST /cancelOrder

### Request Parameters

Name               | Type(value)    | Mandatory | Description
-------------------| ---------------| ----------| -----------
orderId            | String         | (M)       | Mandatory if clientOrderId is not provided
clientOrderId      | String         | (M)       | Mandatory if orderId is not provided

### Success Response Body Fields

Name               | Type(value)       | Mandatory | Description
-------------------| ------------------| ----------| ----------------------------------------
orderId            | String            | M         | 
clientOrderId      | String            | (M)       | Mandatory if clientOrderId is provided
timestamp          | Long              | M         | When the cancel is accepted and order status is updated to PENDING_CANCEL

<a name="cancelAllOrders" id="cancelAllOrders"> </a>

---
## Cancel All Order 

    POST /cancelAllOrders

This is to cancel all open orders with best effort.

### Request Parameters

Name               | Type(value)    | Mandatory | Description
-------------------| ---------------| ----------| -------------------------------------------------
instrumentId       | String         | O         | Cancel all orders for the specified instrument. Default to cancel orders under all instruments

### Success Response Body Fields

Name               | Type(value)       | Mandatory | Description
-------------------| ------------------| ----------| ----------------------------------------
orderIds           | Array of Strings  | M         | Orders that are being cancelled in the system 

<a name="accounts" id="accounts"> </a>

---
## Accounts

    GET /accounts

### Success Response Body Array Json Fields

Name             | Type(value)   | Mandatory | Description
-----------------| --------------| ----------| ---------------------------------------------------
asset            | String        | M         |
balance          | DoubleString  | M         | Remaining balance in the asset
available        | DoubleString  | M         | available balance = balance - outstanding order size - outstanding withdraw request size
lastModifiedTime | Long          | M         | 

<a name="accountTransactions" id="accountTransactions"> </a>

---
## Account Transactions (not implemented)

    GET /accountHistory
    
    Weight: 5

List all the account transactions that either increases or decreases the
account balance and available balance. Pagination is supported.

### Request Parameters

Name            | Type(value)   | Mandatory | Description
----------------| --------------| ----------| ----------------------------------------
asset           | String        | O         | Return recent transactions for all assets
referenceId     | String        | O         | 

### Success Response Body Array Json Fields

Name              | Type(value)   | Mandatory | Description
------------------| --------------| ----------| ------------------------------------------------------------
transactionId     | String        | M         | 
asset             | String        | M         |
transactionType   | Enum          | M         |
amount            | DoubleString  | M         | Amount change triggered by the transaction.
balance           | DoubleString  | M         | 
available         | DoubleString  | M         | 
createdTime       | Long          | M         | 
referenceId       | String        | M         | Reference id associated with the transaction.  TRANSFER(txId) TRADE{tradeId) TRADE_FEE(tradeId) TRANSFER_FEE(txId) 


<a name="withdraw" id="withdraw"> </a>

---
## Withdraw

    POST /withdraw

### Request Parameters

Name            | Type(value)   | Mandatory | Description
----------------| --------------| ----------| ------------------- 
asset           | String        | M         | 
amount          | String        | M         | 
address         | String        | M         | bankId or cryto address

### Success Response Body Fields

Name            | Type(value)   | Mandatory | Description
----------------| --------------| ----------| -------------------
withdrawId      | String        | M         | 
timestamp       | Long          | M         | When the withdraw request was accepted
